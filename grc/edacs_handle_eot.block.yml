# auto-generated by grc.converter

id: edacs_handle_eot
label: Handle EOT
category: '[EDACS]'

parameters:
-   id: samp_rate
    label: Sample Rate
    dtype: int
    default: '48000'
-   id: tone_freq
    label: Tone Frequency
    dtype: int
    default: '4800'
-   id: tone_threshold
    label: Tone Threshold
    dtype: float
    default: '0.1'
-   id: noise_threshold
    label: Noise Threshold
    dtype: float
    default: '5'

inputs:
-   domain: stream
    dtype: float
-   domain: message
    id: status_in
    optional: true

outputs:
-   domain: stream
    dtype: float
-   domain: message
    id: status_out
    optional: true

templates:
    imports: import edacs
    make: edacs.handle_eot(${samp_rate}, ${tone_freq}, ${tone_threshold}, ${noise_threshold})
    callbacks:
    - set_tone_threshold(${tone_threshold})
    - set_noise_threshold(${noise_threshold})

documentation: "Description\n      The Handle EOT block is a sync block (1:1 input:output)\
    \ that acts both as a valve with muted/unmuted states, as well as as an end of\
    \ transmission tone detector.\n\n    Ports:\n\n      Both the primary input port\
    \ and the primary output port accept/produce float values. Receiving a message\
    \ on status_in indicates muting should be stopped. Once the EOT beep is detected\
    \ a message is sent on status_out.\n\n\n    Parameters:\n\n      Sample Rate (Hz)\
    \ - The input and output sample rate in hertz. \n\n      Tone Frequency (Hz) -\
    \ The frequency of the target tone to detect.\n\n      Tone Threshold - Threshold\
    \ for detecting the end of transmission beeps at the end of a call. If transmissions\
    \ are getting cut off this value is too low, if the beeps are heard this value\
    \ is too high.\n\n      Noise Threshold - Threshold for detecting noise in the\
    \ case of that the end of transmission beeps are missed. If transmissions are\
    \ getting interrupted and 'NOISY CHANNEL, MUTING...' messages being printed out,\
    \ then this value is too low. If the channel is getting stuck on static this value\
    \ is too high."

file_format: 1
